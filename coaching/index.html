<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"
    />
    <title>Book a Meeting</title>

    <!-- Favicon -->
    <link rel="icon" href="../alt.jpg" type="image/jpeg" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Poppins", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Helvetica, Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        background-color: #030303;
        color: #e8e8e8;
      }

      .container {
        max-width: 100%;
        margin: 40px auto;
        padding: 0 20px;
      }

      h1 {
        font-size: 2.5rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        color: #ffffff;
        text-shadow: 0px 0px 29px rgba(117, 117, 117, 0.5);
        text-align: center;
        opacity: 0;
        transform: translateY(-20px);
        animation: fadeInDown 0.8s forwards;
      }

      p {
        font-size: 1.2rem;
        color: #e8e8e8;
        margin-bottom: 2rem;
        font-weight: 500;
        text-align: center;
        opacity: 0;
        transform: translateY(-10px);
        animation: fadeInDown 0.8s 0.3s forwards;
      }

      @keyframes fadeInDown {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Cal.com embed styles */
      #my-cal-inline {
        width: 100%;
        min-height: 750px !important;
        height: 750px;
        overflow: visible !important;
        position: relative;
      }

      #my-cal-inline iframe {
        width: 100% !important;
        height: 800px !important;
        min-height: 800px !important;
        border: none !important;
        overflow: visible !important;
      }

      /* Testimonials spacing */
      .testimonials-section {
        margin-top: -10px;
        position: relative;
        margin-bottom: 60px;
      }

      /* Ensure the booking dialog is fully visible */
      .cal-booking-dialog,
      [data-cal-position="dialog"],
      [data-testid="booking-form"],
      [data-testid="reschedule-form"] {
        max-height: none !important;
        overflow: visible !important;
      }

      /* Mobile responsive video */
      @media (max-width: 768px) {
        wistia-player {
          max-height: 240px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Get 500 Subscribers With Tom's Help</h1>
      <p>
        Book a free 45-minute call with me to evaluate your situation and see if
        you'd be a good fit for my personal mentorship.
      </p>

      <div style="max-width: 800px; margin: 30px auto">
        <script src="https://fast.wistia.com/player.js" async></script>
        <script
          src="https://fast.wistia.com/embed/y5dz12cq50.js"
          async
          type="module"
        ></script>
        <style>
          wistia-player[media-id="y5dz12cq50"]:not(:defined) {
            background: center / contain no-repeat
              url("https://fast.wistia.com/embed/medias/y5dz12cq50/swatch");
            display: block;
            filter: blur(5px);
            padding-top: 56.25%;
          }
        </style>
        <wistia-player
          media-id="y5dz12cq50"
          aspect="1.7777777777777777"
        ></wistia-player>
      </div>

      <!-- Cal inline embed code begins -->
      <div id="my-cal-inline"></div>
    </div>
    <script type="text/javascript">
      (function (C, A, L) {
        let p = function (a, ar) {
          a.q.push(ar);
        };
        let d = C.document;
        C.Cal =
          C.Cal ||
          function () {
            let cal = C.Cal;
            let ar = arguments;
            if (!cal.loaded) {
              cal.ns = {};
              cal.q = cal.q || [];
              d.head.appendChild(d.createElement("script")).src = A;
              cal.loaded = true;
            }
            if (ar[0] === L) {
              const api = function () {
                p(api, arguments);
              };
              const namespace = ar[1];
              api.q = api.q || [];
              if (typeof namespace === "string") {
                cal.ns[namespace] = cal.ns[namespace] || api;
                p(cal.ns[namespace], ar);
                p(cal, ["initNamespace", namespace]);
              } else p(cal, ar);
              return;
            }
            p(cal, ar);
          };
      })(window, "https://app.cal.com/embed/embed.js", "init");
      Cal("init", "call", { origin: "https://cal.com" });

      Cal.ns.call("inline", {
        elementOrSelector: "#my-cal-inline",
        config: {
          layout: "month_view",
          hideCalendarDate: true,
          hideEventTypeDetails: false,
          initialView: "month",
          hideBranding: true,
          theme: "dark",
          bookerTimeFormat: "h:mma",
          hideTooltip: false,
          disableAutoSelectedDay: true,
          disableAutoSelectedTime: true,
          selectedDate: null,
          defaultDate: null,
          prefetchNextMonth: false,
          disableDateSelection: true,
          disableTimeSelection: true,
          noDefaultTimes: true,
        },
        calLink: "tomstoll/call",
      });

      Cal.ns.call("ui", {
        cssVarsPerTheme: {
          light: { "cal-brand": "#292929" },
          dark: { "cal-brand": "#4882a5" },
        },
        hideEventTypeDetails: false,
        layout: "month_view",
        hideCalendarDate: true,
        initialView: "month",
        autoSelectTime: false,
        disableAutoSelectedDay: true,
        disableAutoSelectedTime: true,
        selectedDate: null,
        defaultDate: null,
        prefetchNextMonth: false,
        disableDateSelection: true,
        disableTimeSelection: true,
        noDefaultTimes: true,
      });
    </script>
    <!-- Cal inline embed code ends -->

    <!-- Testimonials Section -->
    <div class="testimonials-section">
      <h2
        style="
          font-size: 2rem;
          font-weight: 600;
          margin-bottom: 30px;
          text-align: center;
          color: #ffffff;
          text-shadow: 0px 0px 29px rgba(117, 117, 117, 0.5);
        "
      >
        Here's What My Clients Have To Say
      </h2>
      <div
        class="testimonials-container"
        style="
          display: flex;
          flex-wrap: wrap;
          gap: 20px;
          justify-content: center;
          max-width: 1200px;
          margin: 0 auto;
        "
      >
        <!-- First testimonial video -->
        <div
          class="testimonial-video"
          style="flex: 1; min-width: 300px; max-width: 48%; margin-bottom: 20px"
        >
          <script src="https://fast.wistia.com/player.js" async></script>
          <script
            src="https://fast.wistia.com/embed/rsxwn4ac8f.js"
            async
            type="module"
          ></script>
          <style>
            wistia-player[media-id="rsxwn4ac8f"]:not(:defined) {
              background: center / contain no-repeat
                url("https://fast.wistia.com/embed/medias/rsxwn4ac8f/swatch");
              display: block;
              filter: blur(5px);
              padding-top: 56.25%;
            }
          </style>
          <wistia-player
            media-id="rsxwn4ac8f"
            aspect="1.7777777777777777"
          ></wistia-player>
        </div>

        <!-- Second testimonial video -->
        <div
          class="testimonial-video"
          style="flex: 1; min-width: 300px; max-width: 48%; margin-bottom: 20px"
        >
          <script src="https://fast.wistia.com/player.js" async></script>
          <script
            src="https://fast.wistia.com/embed/uh73bhfwqi.js"
            async
            type="module"
          ></script>
          <style>
            wistia-player[media-id="uh73bhfwqi"]:not(:defined) {
              background: center / contain no-repeat
                url("https://fast.wistia.com/embed/medias/uh73bhfwqi/swatch");
              display: block;
              filter: blur(5px);
              padding-top: 56.56%;
            }
          </style>
          <wistia-player
            media-id="uh73bhfwqi"
            aspect="1.7679558011049723"
          ></wistia-player>
        </div>
      </div>
    </div>

    <!-- Admin Controls (hidden by default) -->
    <div
      id="adminControls"
      style="display: none; margin-top: 50px; text-align: center"
    >
      <hr style="border: 1px solid #333; margin: 20px 0" />
      <h3>Admin Controls</h3>
      <button
        onclick="clearCoachingVisits(); return false;"
        style="
          background: #4882a5;
          color: #fff;
          border: none;
          padding: 10px 20px;
          cursor: pointer;
          border-radius: 4px;
        "
      >
        Reset Visit Counter
      </button>
      <button
        onclick="checkCoachingVisits(); return false;"
        style="
          background: #333;
          color: #fff;
          border: none;
          padding: 10px 20px;
          cursor: pointer;
          border-radius: 4px;
          margin-left: 10px;
        "
      >
        Check Visit Stats
      </button>
    </div>

    <script>
      // Visit tracking and admin functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Record page visit
        const pageVisitTimestamp = new Date().toISOString();
        let visitData = JSON.parse(
          localStorage.getItem("coachingPageVisits") || "[]"
        );
        visitData.push({
          timestamp: pageVisitTimestamp,
          referrer: document.referrer || "direct",
          userAgent: navigator.userAgent,
        });
        localStorage.setItem("coachingPageVisits", JSON.stringify(visitData));

        // Setup mobile scrolling for Cal.com embed
        const calFrame = document.querySelector("#my-cal-inline iframe");
        if (calFrame) {
          calFrame.style.webkitOverflowScrolling = "touch";
          document.addEventListener(
            "touchmove",
            function (e) {
              if (e.target.closest("#my-cal-inline")) e.stopPropagation();
            },
            { passive: true }
          );
        }
      });

      // Admin functions
      window.showAdmin = function () {
        document.getElementById("adminControls").style.display = "block";
      };

      window.checkCoachingVisits = function () {
        const visitData = JSON.parse(
          localStorage.getItem("coachingPageVisits") || "[]"
        );
        console.log(
          `Coaching page has been visited ${visitData.length} times:`
        );
        if (visitData.length > 0) {
          console.table(visitData);
        } else {
          console.log("No visits recorded yet.");
        }
        return visitData;
      };

      window.clearCoachingVisits = function () {
        localStorage.removeItem("coachingPageVisits");
        console.log("✅ Coaching visit data has been cleared successfully.");
        return true;
      };
    </script>
  </body>
</html>
